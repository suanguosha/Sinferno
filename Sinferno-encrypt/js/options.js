'use strict';const _0x4514f3=_0x1093;function _0x1093(_0x30c17d,_0x3211ef){const _0x582db3=_0x256b();return _0x1093=function(_0x256bc4,_0x109303){_0x256bc4=_0x256bc4-0x82;let _0x353e1f=_0x582db3[_0x256bc4];return _0x353e1f;},_0x1093(_0x30c17d,_0x3211ef);}(function(stringArrayFunction,comparisonValue){const _0x4b3873=_0x1093,stringArray=stringArrayFunction();while(!![]){try{const expression=parseInt(_0x4b3873(0xb1))/0x1*(parseInt(_0x4b3873(0x8d))/0x2)+parseInt(_0x4b3873(0xa6))/0x3+parseInt(_0x4b3873(0xa8))/0x4*(parseInt(_0x4b3873(0xbf))/0x5)+parseInt(_0x4b3873(0x96))/0x6+-parseInt(_0x4b3873(0xa1))/0x7*(parseInt(_0x4b3873(0xaf))/0x8)+-parseInt(_0x4b3873(0x90))/0x9+-parseInt(_0x4b3873(0x9b))/0xa;if(expression===comparisonValue)break;else stringArray['push'](stringArray['shift']());}catch(e){stringArray['push'](stringArray['shift']());}}}(_0x256b,0xe6e94));function _0x256b(){const _0x59948c=['push','上传规则:\x20','mapListCtrl','fetchSubscription','checked','PUT','title','openCreator','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','SGSSubs','json','keys','2776430BixCqT','../ruleSet.json','writeText','5748759wzoUMs','clipboard','initiateSubscription','storage','application/json','sgs','7599954PJTIzC','none','saveDisplay','$applyAsync','content','16417120ACtRnE','?timestamp=','copy','stringify','loading','then','9842inZTWE','saveMode','https://raw.githubusercontent.com/ME70N/sgsRules/main/','inputError','module','1740831cogwmf','https://api.github.com/repos/ME70N/sgsRules/contents/','4JEmRce','editSubscription','curSubscription','ruleSet','fetchRuleSet','get','createRule','712BowDus','sha','1CuBKEW','message','subscriptions','exportRules','\x0a\x20您的密匙为(更新规则需要,\x20请自行保管):\x20','length','block','请输入订阅规则！','hideEditBox','createDisplay','loadingStatus','uploadRule','curSub','toggleLoading','581290cZsdLO','set','toggleRuleGroup','comment','获取规则失败,\x20请检查订阅地址!','updateStatus'];_0x256b=function(){return _0x59948c;};return _0x256b();}var sgs=angular[_0x4514f3(0xa5)](_0x4514f3(0x95),[]),storage=chrome[_0x4514f3(0x93)]['local'],defaultSubscription={'url':'','title':'','comment':'','sha':'','ruleSet':[]};sgs['controller'](_0x4514f3(0x83),function($scope){const _0x137888=_0x4514f3;var saveData=function(key,data){const _0x51925f=_0x1093;storage[_0x51925f(0xc0)]({[key]:data},()=>{});};$scope[_0x137888(0xbb)]=![],$scope[_0x137888(0xbe)]=status=>{const _0x3c7439=_0x137888;$scope[_0x3c7439(0xbb)]=status;},$scope['updateError']=message=>{const _0x223f28=_0x137888;$scope[_0x223f28(0xa4)]=message;},$scope['importSubscription']=function(curSubscription){const _0x283773=_0x137888;$scope[_0x283773(0xa4)]='',$scope[_0x283773(0xba)]=_0x283773(0x97),$scope[_0x283773(0x98)]===_0x283773(0x97)||$scope[_0x283773(0xa2)]==='生成'?(!curSubscription&&($scope['curSubscription']=defaultSubscription),$scope[_0x283773(0xa2)]='添加',$scope['saveDisplay']='block'):$scope['saveMode']==='添加'&&($scope[_0x283773(0x98)]=_0x283773(0x97));},$scope[_0x137888(0x88)]=function(){const _0x3b1f38=_0x137888;$scope[_0x3b1f38(0xa4)]='',$scope['saveDisplay']=_0x3b1f38(0x97),$scope['createDisplay']===_0x3b1f38(0x97)?$scope[_0x3b1f38(0xba)]=_0x3b1f38(0xb7):$scope[_0x3b1f38(0xba)]='none';},$scope[_0x137888(0xb4)]=function(){const _0x15bb85=_0x137888;let curRuleIndex=-0x1;for(var _0x62613c=0x0,len=$scope['subscriptions'][_0x15bb85(0xb6)];_0x62613c<len;_0x62613c++){$scope[_0x15bb85(0xb3)][_0x62613c][_0x15bb85(0x85)]&&(curRuleIndex=_0x62613c);}if(curRuleIndex==-0x1){alert('请选中需要分享的订阅规则！');return;}let text='【'+$scope[_0x15bb85(0xb3)][curRuleIndex][_0x15bb85(0x87)]+'】'+$scope[_0x15bb85(0xb3)][curRuleIndex]['url'];navigator[_0x15bb85(0x91)][_0x15bb85(0x8f)](text)[_0x15bb85(0xa0)](()=>{alert('已将订阅规则复制到剪贴板！');});},$scope['subscriptions']=[],storage[_0x137888(0xad)](['SGSSubs'],function(data){const _0x555683=_0x137888;$scope[_0x555683(0x92)](data['SGSSubs']);}),$scope['initiateSubscription']=data=>{const _0x1c9046=_0x137888;Object[_0x1c9046(0x8c)](data)[_0x1c9046(0xb6)]!==0x0&&($scope[_0x1c9046(0xb3)]=data);},$scope['curSubscription']={...defaultSubscription},$scope[_0x137888(0x98)]=_0x137888(0x97),$scope[_0x137888(0xa2)]='添加',$scope[_0x137888(0xa4)]='',$scope[_0x137888(0xb9)]=function(){const _0x25622f=_0x137888;$scope[_0x25622f(0x98)]=_0x25622f(0x97),$scope[_0x25622f(0xa4)]='';},$scope['changeSubscription']=function(sub){const _0x225239=_0x137888;for(var _0x5171ff=0x0,len=$scope[_0x225239(0xb3)]['length'];_0x5171ff<len;_0x5171ff++){$scope['subscriptions'][_0x5171ff]!==sub&&($scope[_0x225239(0xb3)][_0x5171ff][_0x225239(0x85)]=![]);}saveData(_0x225239(0x8a),$scope[_0x225239(0xb3)]),saveData(_0x225239(0xbd),sub);},$scope[_0x137888(0xa9)]=function(sub){const _0x30f5f3=_0x137888;$scope[_0x30f5f3(0xaa)]=sub,$scope['saveMode']='编辑',$scope[_0x30f5f3(0x98)]=_0x30f5f3(0xb7),$scope[_0x30f5f3(0xa4)]='',$scope[_0x30f5f3(0xba)]='none';},$scope['saveSubscription']=function(){const _0x4cb76c=_0x137888;var verify=function(){const _0x230c40=_0x1093;if(!$scope[_0x230c40(0xaa)]['url'])return $scope[_0x230c40(0xa4)]=_0x230c40(0xb8),![];return $scope[_0x230c40(0xa4)]='',!![];};if($scope[_0x4cb76c(0xa2)]=='生成'){$scope['uploadRule']();return;}verify()&&$scope[_0x4cb76c(0x84)]($scope['curSubscription']['url'])[_0x4cb76c(0xa0)](res=>{const _0x56b6b8=_0x4cb76c;$scope[_0x56b6b8(0x99)](function(){const _0x433819=_0x56b6b8;if($scope[_0x433819(0xa2)]==='添加'){$scope[_0x433819(0xaa)][_0x433819(0x87)]=$scope['curSubscription'][_0x433819(0x87)]||res[_0x433819(0x87)],$scope[_0x433819(0xaa)]['comment']=$scope[_0x433819(0xaa)]['comment']||res[_0x433819(0xc2)],$scope[_0x433819(0xaa)][_0x433819(0xab)]=res['ruleSet'];let subscription=angular[_0x433819(0x9d)]($scope[_0x433819(0xaa)]);$scope[_0x433819(0xb3)][_0x433819(0xc5)](subscription);}saveData(_0x433819(0x8a),$scope[_0x433819(0xb3)]),$scope[_0x433819(0x98)]=_0x433819(0x97),$scope[_0x433819(0xba)]='none';});});},$scope['removeSubscription']=function(sub){const _0x276888=_0x137888;for(var _0x14682f=0x0,len=$scope['subscriptions'][_0x276888(0xb6)];_0x14682f<len;_0x14682f++){$scope[_0x276888(0xb3)][_0x14682f]===sub&&$scope[_0x276888(0xb3)]['splice'](_0x14682f,0x1);}saveData('SGSSubs',$scope[_0x276888(0xb3)]);},$scope[_0x137888(0xba)]=_0x137888(0x97),$scope[_0x137888(0xae)]=function(){const _0x45635b=_0x137888;$scope[_0x45635b(0xa2)]='生成',$scope['saveDisplay']=_0x45635b(0xb7);},$scope[_0x137888(0xbc)]=()=>{const _0x261983=_0x137888;$scope[_0x261983(0xbe)](!![]);let token=_0x261983(0x89),sgsRules={'title':$scope[_0x261983(0xaa)]['title'],'comment':$scope[_0x261983(0xaa)]['comment'],'ruleSet':$scope['ruleSet']},fileName=$scope[_0x261983(0xaa)][_0x261983(0x87)]+'.json',body={'message':_0x261983(0x82)+(''+$scope[_0x261983(0xaa)][_0x261983(0x87)]),'content':btoa(unescape(encodeURIComponent(JSON[_0x261983(0x9e)](sgsRules))))};$scope[_0x261983(0xaa)][_0x261983(0xb0)]&&(body['sha']=$scope[_0x261983(0xaa)][_0x261983(0xb0)]),fetch(_0x261983(0xa7)+fileName,{'method':_0x261983(0x86),'headers':{'Content-Type':_0x261983(0x94),'Authorization':'Bearer\x20'+token},'body':JSON[_0x261983(0x9e)](body)})[_0x261983(0xa0)](res=>{const _0x459537=_0x261983;return $scope[_0x459537(0xbe)](![]),res[_0x459537(0x8b)]();})[_0x261983(0xa0)](data=>{const _0x126593=_0x261983;if(data['content']){let subscription_link=_0x126593(0xa3)+fileName,sha=data[_0x126593(0x9a)][_0x126593(0xb0)];$scope['$applyAsync'](function(){const _0x554598=_0x126593;$scope['updateError']('生成成功!\x0a\x20您的订阅地址为:\x20'+subscription_link+_0x554598(0xb5)+sha);});}else $scope[_0x126593(0x99)](function(){const _0x309097=_0x126593;$scope['updateError'](data[_0x309097(0xb2)]);});});},$scope[_0x137888(0xac)]=function(){const _0x97f6b8=_0x137888;fetch(_0x97f6b8(0x8e))[_0x97f6b8(0xa0)](res=>res[_0x97f6b8(0x8b)]())[_0x97f6b8(0xa0)](response=>{const _0x34397b=_0x97f6b8;$scope[_0x34397b(0x99)](function(){const _0x5c8f70=_0x34397b;$scope[_0x5c8f70(0xab)]=response;});});},$scope['fetchRuleSet'](),$scope[_0x137888(0xc1)]=function(group,index){const _0x20208b=_0x137888;for(var _0x1152f1=0x0,len=$scope[_0x20208b(0xab)][index]['rows'][_0x20208b(0xb6)];_0x1152f1<len;_0x1152f1++){$scope[_0x20208b(0xab)][index]['rows'][_0x1152f1]['checked']=group[_0x20208b(0x85)];}},$scope[_0x137888(0xc4)]={'loading':![]},$scope['fetchSubscription']=function(url){const _0x2621cf=_0x137888;return $scope[_0x2621cf(0xc4)][_0x2621cf(0x9f)]=!![],new Promise(resolve=>{const _0x17b000=_0x2621cf;fetch(url+_0x17b000(0x9c)+Math['random']())[_0x17b000(0xa0)](res=>{const _0x387b63=_0x17b000;$scope[_0x387b63(0x99)](function(){const _0x5629c6=_0x387b63;$scope[_0x5629c6(0xc4)][_0x5629c6(0x9f)]=![],res['ok']?res[_0x5629c6(0x8b)]()[_0x5629c6(0xa0)](res=>{resolve(res);}):$scope[_0x5629c6(0xa4)]=_0x5629c6(0xc3);});});});};});